<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<html xmlns="http://www.w3.org/1999/xhtml">  
<head>  
    <title>滚动条拖到底自动翻页</title>  
    <script src="/JS/jquery-latest.pack.js" type="text/javascript"></script>  
    <script src="/JS/jquery-latest.min.js" type="text/javascript"></script>  
    <script src="/JS/Control.js" type="text/javascript"></script>  
    <script type="text/javascript">  
        jQuery.extend({  
            scrollPage: function (p, f) {  
                var n = c = t = h = new Number;  
                $(function () {  
                    $(window).scroll(function () {  
                        if (n == p) { $(this).unbind("scroll"); }  
                        c = document.documentElement.clientHeight;  
                        t = $(document).scrollTop();  
                        h = $(document).height();  
                        if (h - t - c == 0) {  
                            f();  
                            if (p > 0) n += 1;  
                        }  
                    });  
                });  
            }  
        });  
        $.scrollPage(-1, function () {  
            //$("body").append("<div style=\"height:200px;line-height:200px;color:#f00;\">www.wutongxia.com提醒您：这是加载进来的分页数据</div>");  
            $.ajax({  
                url: "/Handler/JQueryJson.ashx",  
                type: 'POST',  
                data: {  
                    action: 'GetCountry',  
                    id: '123'  
                },  
                success: function (responseText) {  
                    var temp = "<div style=\"height:100px;font-size:xx-large;color:#f00;background-color:Blue;\">";  
                    var re = responseText.toJson();  
                    $.each(re, function (i, c) {  
                        temp += c.title + ";";  
                    });  
                    temp += "</div><div style=\"height:10px;\"></div>";  
                    $("body").append(temp);  
                }  
            });  
        });  
    </script>  
</head>  
<body>  
    <h1>  
        滚动条拖到底自动翻页</h1>  
    <p style="">  
        <strong>$.scrollPage(data,fn)</strong><br>  
        <em>data</em>(Number)<br>  
        -1一直翻页;0不翻页;n翻n页<br>  
        <em>fn</em>(Function)<br>  
        当滚动条拖到底部时要执行的函数  
    </p>  
    <p>  
        -----------------------可爱的分割线----------------------------------</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p>  
        <a href="#">高富帅</a> 福富福富福富福富福富</p>  
    <p style="color: #00f">  
        这是原来底部</p>  
    <div id="aaa">  
    </div>  
</body>  
</html>  